<script>
    let currentTargetId = ''; 

    // --- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏î‡∏∂‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡πÑ‡∏ó‡∏¢ ---
    function getThaiDate() {
        const now = new Date();
        const months = [
            "‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏°", "‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå", "‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏°", "‡πÄ‡∏°‡∏©‡∏≤‡∏¢‡∏ô", "‡∏û‡∏§‡∏©‡∏†‡∏≤‡∏Ñ‡∏°", "‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô",
            "‡∏Å‡∏£‡∏Å‡∏é‡∏≤‡∏Ñ‡∏°", "‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏°", "‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡∏¢‡∏ô", "‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏°", "‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô", "‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏°"
        ];
        const date = now.getDate();
        const month = months[now.getMonth()];
        const year = now.getFullYear() + 543; // ‡πÅ‡∏õ‡∏•‡∏á ‡∏Ñ.‡∏®. ‡πÄ‡∏õ‡πá‡∏ô ‡∏û.‡∏®.
        return `‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ${date} ${month} ${year}`;
    }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏•‡∏≠‡∏¢‡πÅ‡∏ö‡∏ö‡∏£‡∏∞‡∏ö‡∏∏‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÑ‡∏î‡πâ (‡∏Ñ‡∏á‡πÄ‡∏î‡∏¥‡∏°)
    function openEditor(id, title) {
        currentTargetId = id;
        document.getElementById('editor-title').innerText = title;
        const mainVal = document.getElementById(id).value;
        document.getElementById('expanded-text').value = mainVal;
        document.getElementById('editorOverlay').style.display = 'flex';
        
        const textarea = document.getElementById('expanded-text');
        setTimeout(() => {
            textarea.focus();
            textarea.setSelectionRange(textarea.value.length, textarea.value.length);
        }, 100);
    }

    function closeEditor(isSave) {
        if (isSave) {
            const newVal = document.getElementById('expanded-text').value;
            document.getElementById(currentTargetId).value = newVal;
        }
        document.getElementById('editorOverlay').style.display = 'none';
    }

    const GOOGLE_SCRIPT_URL = "YOUR_GOOGLE_SCRIPT_URL";

    function showHint() {
        const hint = document.getElementById('copyHint');
        hint.style.display = 'block';
        setTimeout(() => { hint.style.display = 'none'; }, 2500);
        window.scrollTo(0, document.body.scrollHeight);
    }

    async function processAndSend(text, jsonData) {
        const out = document.getElementById('output');
        out.innerText = text;
        out.style.display = 'block';

        if (navigator.clipboard && window.isSecureContext) {
            await navigator.clipboard.writeText(text);
        } else {
            let textArea = document.createElement("textarea");
            textArea.value = text; document.body.appendChild(textArea);
            textArea.select(); document.execCommand('copy');
            document.body.removeChild(textArea);
        }
        showHint();
        if (GOOGLE_SCRIPT_URL !== "YOUR_GOOGLE_SCRIPT_URL") {
            try {
                fetch(GOOGLE_SCRIPT_URL, { method: 'POST', mode: 'no-cors', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(jsonData) });
            } catch (e) { console.error(e); }
        }
    }

    // ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÄ‡∏û‡∏•‡∏¥‡∏á‡πÑ‡∏´‡∏°‡πâ (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà)
    function reportFire() {
        let cars = [];
        for(let i=1; i<=3; i++) {
            let val = document.getElementById('fire_car' + i).value;
            if(val) cars.push(val);
        }
        const text = `${getThaiDate()}\n‡∏™.‡∏î‡∏û.‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô\nüî• ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏û‡∏•‡∏¥‡∏á‡πÑ‡∏´‡∏°‡πâ\n‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà/‡∏û‡∏¥‡∏Å‡∏±‡∏î: ${document.getElementById('fire_place').value || '-'}\n‡∏£‡∏ñ‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏Å‡πÄ‡∏´‡∏ï‡∏∏: ${cars.join(', ') || '-'}\n‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏±‡∏ö‡πÅ‡∏à‡πâ‡∏á: ${document.getElementById('f_t1').value || '--:--'} ‡∏ô.\n‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏à‡πâ‡∏á‡∏≠‡∏≠‡∏Å: ${document.getElementById('f_t2').value || '--:--'} ‡∏ô.\n‡πÄ‡∏ß‡∏•‡∏≤ ‡∏ß.10: ${document.getElementById('f_t3').value || '--:--'} ‡∏ô.\n‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏ä‡πâ‡∏ô‡πâ‡∏≥: ${document.getElementById('f_t4').value || '--:--'} ‡∏ô.\n‡πÄ‡∏•‡∏¥‡∏Å ‡∏ß.10: ${document.getElementById('f_t5').value || '--:--'} ‡∏ô.\n‡∏ß.4 ‡∏™.‡∏î‡∏û.: ${document.getElementById('f_t6').value || '--:--'} ‡∏ô.\n‡∏ú‡∏π‡πâ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥: ${document.getElementById('fire_team').value || '-'}\n‡∏ú‡∏π‡πâ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô: ${document.getElementById('fire_sender').value || '-'}`;
        processAndSend(text, { type: "‡πÄ‡∏û‡∏•‡∏¥‡∏á‡πÑ‡∏´‡∏°‡πâ", date: getThaiDate(), staff: document.getElementById('fire_team').value, sender: document.getElementById('fire_sender').value });
    }

    // ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà)
    function reportRescue() {
        const text = `${getThaiDate()}\n‡∏™.‡∏î‡∏û.‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô\nüêæ ‡πÄ‡∏´‡∏ï‡∏∏‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô\n‡∏ä‡∏ô‡∏¥‡∏î: ${document.getElementById('res_type_text').value || '-'}\n‡∏Ç‡∏ô‡∏≤‡∏î/‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: ${document.getElementById('res_len_text').value || '-'}\n‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà/‡∏û‡∏¥‡∏Å‡∏±‡∏î: ${document.getElementById('res_place').value || '-'}\n‡∏£‡∏ñ‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏Å‡πÄ‡∏´‡∏ï‡∏∏: ${document.getElementById('res_car_single').value || '-'}\n‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏±‡∏ö‡πÅ‡∏à‡πâ‡∏á: ${document.getElementById('r_t1').value || '--:--'} ‡∏ô.\n‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏à‡πâ‡∏á‡∏≠‡∏≠‡∏Å: ${document.getElementById('r_t2').value || '--:--'} ‡∏ô.\n‡πÄ‡∏ß‡∏•‡∏≤ ‡∏ß.10: ${document.getElementById('r_t3').value || '--:--'} ‡∏ô.\n‡πÄ‡∏•‡∏¥‡∏Å ‡∏ß.10: ${document.getElementById('r_t4').value || '--:--'} ‡∏ô.\n‡∏ß.4 ‡∏™.‡∏î‡∏û.: ${document.getElementById('r_t5').value || '--:--'} ‡∏ô.\n‡∏ú‡∏π‡πâ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥: ${document.getElementById('res_team').value || '-'}\n‡∏ú‡∏π‡πâ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô: ${document.getElementById('res_sender').value || '-'}`;
        processAndSend(text, { type: "‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô", date: getThaiDate(), staff: document.getElementById('res_team').value, sender: document.getElementById('res_sender').value });
    }
</script>
<body>

<header>
    <h2>üöí ‡∏™.‡∏î‡∏û.‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô (V2.3.0)</h2>
</header>

<div class="container">
    <div class="form-group group-fire">
        <h3>üî• ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏û‡∏•‡∏¥‡∏á‡πÑ‡∏´‡∏°‡πâ</h3>
        <label>üìç ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡πÄ‡∏´‡∏ï‡∏∏ / ‡∏û‡∏¥‡∏Å‡∏±‡∏î</label>
        <input type="text" id="fire_place" placeholder="‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà" readonly onclick="openEditor('fire_place', 'üìç ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡πÄ‡∏´‡∏ï‡∏∏')">
        
        <label>üöí ‡∏£‡∏ñ‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏Å‡πÄ‡∏´‡∏ï‡∏∏ (‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 3 ‡∏Ñ‡∏±‡∏ô)</label>
        <div class="car-grid">
            <select id="fire_car1"><option value="">-- ‡∏£‡∏ñ 1 --</option><option value="‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 061-1">‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 061-1</option><option value="‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 062-1">‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 062-1</option><option value="‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 041-1">‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 041-1</option><option value="‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 051-1">‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 051-1</option><option value="‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 052-1">‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 052-1</option><option value="‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 052-2">‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 052-2</option><option value="‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 053-1">‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 053-1</option></select>
            <select id="fire_car2"><option value="">-- ‡∏£‡∏ñ 2 --</option><option value="‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 061-1">‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 061-1</option><option value="‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 062-1">‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 062-1</option><option value="‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 041-1">‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 041-1</option><option value="‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 051-1">‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 051-1</option><option value="‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 052-1">‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 052-1</option><option value="‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 052-2">‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 052-2</option><option value="‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 053-1">‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 053-1</option></select>
            <select id="fire_car3"><option value="">-- ‡∏£‡∏ñ 3 --</option><option value="‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 061-1">‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 061-1</option><option value="‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 062-1">‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 062-1</option><option value="‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 041-1">‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 041-1</option><option value="‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 051-1">‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 051-1</option><option value="‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 052-1">‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 052-1</option><option value="‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 052-2">‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 052-2</option><option value="‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 053-1">‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 053-1</option></select>
        </div>

        <div class="time-grid">
            <div class="time-item"><label>‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏±‡∏ö‡πÅ‡∏à‡πâ‡∏á</label><input type="time" id="f_t1"></div>
            <div class="time-item"><label>‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏à‡πâ‡∏á‡∏≠‡∏≠‡∏Å</label><input type="time" id="f_t2"></div>
            <div class="time-item"><label>‡πÄ‡∏ß‡∏•‡∏≤ ‡∏ß.10</label><input type="time" id="f_t3"></div>
            <div class="time-item"><label>‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏ä‡πâ‡∏ô‡πâ‡∏≥</label><input type="time" id="f_t4"></div>
            <div class="time-item"><label>‡πÄ‡∏•‡∏¥‡∏Å ‡∏ß.10</label><input type="time" id="f_t5"></div>
            <div class="time-item"><label>‡∏ß.4 ‡∏™.‡∏î‡∏û.</label><input type="time" id="f_t6"></div>
        </div>
        
        <label>üë• ‡∏ú‡∏π‡πâ‡∏≠‡∏≠‡∏Å‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà</label>
        <textarea id="fire_team" rows="2" placeholder="‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠..." readonly onclick="openEditor('fire_team', 'üë• ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà')"></textarea>
        
        <label>üì¢ ‡∏ú‡∏π‡πâ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</label>
        <input type="text" id="fire_sender" placeholder="‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏∏‡∏ú‡∏π‡πâ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô" readonly onclick="openEditor('fire_sender', 'üì¢ ‡∏ú‡∏π‡πâ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô (‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏Ç‡∏≤‡∏ô)')">
        
        <button class="btn-submit btn-red" onclick="reportFire()">‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÄ‡∏û‡∏•‡∏¥‡∏á‡πÑ‡∏´‡∏°‡πâ</button>
    </div>

    <div class="form-group group-rescue">
        <h3>üêæ ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô</h3>
        <label>üêæ ‡∏ä‡∏ô‡∏¥‡∏î‡∏™‡∏±‡∏ï‡∏ß‡πå / ‡πÄ‡∏´‡∏ï‡∏∏‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠</label>
        <input type="text" id="res_type_text" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏á‡∏π‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏°, ‡∏Å‡∏≥‡∏à‡∏±‡∏î‡∏£‡∏±‡∏á‡∏ï‡πà‡∏≠" readonly onclick="openEditor('res_type_text', 'üêæ ‡∏ä‡∏ô‡∏¥‡∏î‡∏™‡∏±‡∏ï‡∏ß‡πå / ‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏´‡∏ï‡∏∏')">
        
        <label>üìè ‡∏Ç‡∏ô‡∏≤‡∏î/‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</label>
        <input type="text" id="res_len_text" placeholder="‡πÄ‡∏ä‡πà‡∏ô 2 ‡πÄ‡∏°‡∏ï‡∏£, 1 ‡∏ï‡∏±‡∏ß" readonly onclick="openEditor('res_len_text', 'üìè ‡∏Ç‡∏ô‡∏≤‡∏î/‡∏à‡∏≥‡∏ô‡∏ß‡∏ô')">
        
        <label>üìç ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà / ‡∏û‡∏¥‡∏Å‡∏±‡∏î</label>
        <input type="text" id="res_place" placeholder="‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà" readonly onclick="openEditor('res_place', 'üìç ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡πÄ‡∏´‡∏ï‡∏∏')">
        
        <label>üöí ‡∏£‡∏ñ‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏Å‡πÄ‡∏´‡∏ï‡∏∏</label>
        <select id="res_car_single"><option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏±‡∏ô‡∏£‡∏ñ --</option><option value="‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 061-1">‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 061-1</option><option value="‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 062-1">‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 062-1</option><option value="‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 041-1">‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 041-1</option><option value="‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 051-1">‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 051-1</option><option value="‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 052-1">‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 052-1</option><option value="‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 052-2">‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 052-2</option><option value="‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 053-1">‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 053-1</option></select>

        <div class="time-grid">
            <div class="time-item"><label>‡∏£‡∏±‡∏ö‡πÅ‡∏à‡πâ‡∏á</label><input type="time" id="r_t1"></div>
            <div class="time-item"><label>‡πÅ‡∏à‡πâ‡∏á‡∏≠‡∏≠‡∏Å</label><input type="time" id="r_t2"></div>
            <div class="time-item"><label>‡∏ß.10</label><input type="time" id="r_t3"></div>
            <div class="time-item"><label>‡πÄ‡∏•‡∏¥‡∏Å ‡∏ß.10</label><input type="time" id="r_t4"></div>
            <div class="time-item"><label>‡∏ß.4 ‡∏™.‡∏î‡∏û.</label><input type="time" id="r_t5"></div>
        </div>

        <label>üë• ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà</label>
        <textarea id="res_team" rows="2" placeholder="‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠..." readonly onclick="openEditor('res_team', 'üë• ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà')"></textarea>
        
        <label>üì¢ ‡∏ú‡∏π‡πâ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</label>
        <input type="text" id="res_sender" placeholder="‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏∏‡∏ú‡∏π‡πâ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô" readonly onclick="openEditor('res_sender', 'üì¢ ‡∏ú‡∏π‡πâ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô')">
        
        <button class="btn-submit btn-yellow" onclick="reportRescue()">‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠</button>
    </div>

    <div id="copyHint" class="copy-hint">‚úÖ ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡πâ‡∏ß!</div>
    <div id="output"></div>
</div>

<div id="editorOverlay" class="overlay">
    <div class="editor-container">
        <h4 id="editor-title">üìù ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h4>
        <textarea id="expanded-text" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..."></textarea>
        <div class="editor-footer">
            <button class="btn-cancel" onclick="closeEditor(false)">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
            <button class="btn-save" onclick="closeEditor(true)">‡∏ï‡∏Å‡∏•‡∏á</button>
        </div>
    </div>
</div>

<script>
    let currentTargetId = ''; 

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏•‡∏≠‡∏¢‡πÅ‡∏ö‡∏ö‡∏£‡∏∞‡∏ö‡∏∏‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÑ‡∏î‡πâ
    function openEditor(id, title) {
        currentTargetId = id;
        document.getElementById('editor-title').innerText = title;
        const mainVal = document.getElementById(id).value;
        document.getElementById('expanded-text').value = mainVal;
        document.getElementById('editorOverlay').style.display = 'flex';
        
        // ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô cursor ‡πÑ‡∏õ‡∏ó‡πâ‡∏≤‡∏¢‡∏™‡∏∏‡∏î
        const textarea = document.getElementById('expanded-text');
        setTimeout(() => {
            textarea.focus();
            textarea.setSelectionRange(textarea.value.length, textarea.value.length);
        }, 100);
    }

    function closeEditor(isSave) {
        if (isSave) {
            const newVal = document.getElementById('expanded-text').value;
            document.getElementById(currentTargetId).value = newVal;
        }
        document.getElementById('editorOverlay').style.display = 'none';
    }

    // ‡∏™‡πà‡∏ß‡∏ô‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°)
    const GOOGLE_SCRIPT_URL = "YOUR_GOOGLE_SCRIPT_URL";

    function showHint() {
        const hint = document.getElementById('copyHint');
        hint.style.display = 'block';
        setTimeout(() => { hint.style.display = 'none'; }, 2500);
        window.scrollTo(0, document.body.scrollHeight);
    }

    async function processAndSend(text, jsonData) {
        const out = document.getElementById('output');
        out.innerText = text;
        out.style.display = 'block';

        if (navigator.clipboard && window.isSecureContext) {
            await navigator.clipboard.writeText(text);
        } else {
            let textArea = document.createElement("textarea");
            textArea.value = text; document.body.appendChild(textArea);
            textArea.select(); document.execCommand('copy');
            document.body.removeChild(textArea);
        }
        showHint();
        if (GOOGLE_SCRIPT_URL !== "YOUR_GOOGLE_SCRIPT_URL") {
            try {
                fetch(GOOGLE_SCRIPT_URL, { method: 'POST', mode: 'no-cors', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(jsonData) });
            } catch (e) { console.error(e); }
        }
    }

    function reportFire() {
        let cars = [];
        for(let i=1; i<=3; i++) {
            let val = document.getElementById('fire_car' + i).value;
            if(val) cars.push(val);
        }
        const text = `‡∏™.‡∏î‡∏û.‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô\nüî• ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏û‡∏•‡∏¥‡∏á‡πÑ‡∏´‡∏°‡πâ\n‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà/‡∏û‡∏¥‡∏Å‡∏±‡∏î: ${document.getElementById('fire_place').value || '-'}\n‡∏£‡∏ñ‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏Å‡πÄ‡∏´‡∏ï‡∏∏: ${cars.join(', ') || '-'}\n‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏±‡∏ö‡πÅ‡∏à‡πâ‡∏á: ${document.getElementById('f_t1').value || '--:--'} ‡∏ô.\n‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏à‡πâ‡∏á‡∏≠‡∏≠‡∏Å: ${document.getElementById('f_t2').value || '--:--'} ‡∏ô.\n‡πÄ‡∏ß‡∏•‡∏≤ ‡∏ß.10: ${document.getElementById('f_t3').value || '--:--'} ‡∏ô.\n‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏ä‡πâ‡∏ô‡πâ‡∏≥: ${document.getElementById('f_t4').value || '--:--'} ‡∏ô.\n‡πÄ‡∏•‡∏¥‡∏Å ‡∏ß.10: ${document.getElementById('f_t5').value || '--:--'} ‡∏ô.\n‡∏ß.4 ‡∏™.‡∏î‡∏û.: ${document.getElementById('f_t6').value || '--:--'} ‡∏ô.\n‡∏ú‡∏π‡πâ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥: ${document.getElementById('fire_team').value || '-'}\n‡∏ú‡∏π‡πâ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô: ${document.getElementById('fire_sender').value || '-'}`;
        processAndSend(text, { type: "‡πÄ‡∏û‡∏•‡∏¥‡∏á‡πÑ‡∏´‡∏°‡πâ", staff: document.getElementById('fire_team').value, sender: document.getElementById('fire_sender').value });
    }

    function reportRescue() {
        const text = `‡∏™.‡∏î‡∏û.‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô\nüêæ ‡πÄ‡∏´‡∏ï‡∏∏‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô\n‡∏ä‡∏ô‡∏¥‡∏î: ${document.getElementById('res_type_text').value || '-'}\n‡∏Ç‡∏ô‡∏≤‡∏î/‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: ${document.getElementById('res_len_text').value || '-'}\n‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà/‡∏û‡∏¥‡∏Å‡∏±‡∏î: ${document.getElementById('res_place').value || '-'}\n‡∏£‡∏ñ‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏Å‡πÄ‡∏´‡∏ï‡∏∏: ${document.getElementById('res_car_single').value || '-'}\n‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏±‡∏ö‡πÅ‡∏à‡πâ‡∏á: ${document.getElementById('r_t1').value || '--:--'} ‡∏ô.\n‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏à‡πâ‡∏á‡∏≠‡∏≠‡∏Å: ${document.getElementById('r_t2').value || '--:--'} ‡∏ô.\n‡πÄ‡∏ß‡∏•‡∏≤ ‡∏ß.10: ${document.getElementById('r_t3').value || '--:--'} ‡∏ô.\n‡πÄ‡∏•‡∏¥‡∏Å ‡∏ß.10: ${document.getElementById('r_t4').value || '--:--'} ‡∏ô.\n‡∏ß.4 ‡∏™.‡∏î‡∏û.: ${document.getElementById('r_t5').value || '--:--'} ‡∏ô.\n‡∏ú‡∏π‡πâ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥: ${document.getElementById('res_team').value || '-'}\n‡∏ú‡∏π‡πâ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô: ${document.getElementById('res_sender').value || '-'}`;
        processAndSend(text, { type: "‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô", staff: document.getElementById('res_team').value, sender: document.getElementById('res_sender').value });
    }
</script>

</body>
</html>

